!function e(t,o,i){function n(a,l){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){var o=t[a][1][e];return n(o?o:e)},d,d.exports,e,t,o,i)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,o){var i=e("../models/chapter");t.exports=Backbone.Collection.extend({model:i,id:1,page:1,order:"asc",url:function(){var e=[];return this.id&&e.push("filter[author]="+this.id),this.page&&e.push("filter[page]="+this.page),e.push("filter[order]="+this.order),Dracobit.options.apiUrl+"/chapter?"+e.join("&")}})},{"../models/chapter":5}],2:[function(e,t,o){var i=e("../models/post");t.exports=Backbone.Collection.extend({model:i,page:1,order:"asc",url:function(){var e=[];return this.page&&e.push("page="+this.page),e.push("filter[order]="+this.order),Dracobit.options.apiUrl+"/posts?"+e.join("&")}})},{"../models/post":6}],3:[function(e,t,o){var i=e("../models/tutorial");t.exports=Backbone.Collection.extend({model:i,page:1,order:"asc",url:function(){var e=[];return this.page&&e.push("page="+this.page),e.push("filter[order]="+this.order),Dracobit.options.apiUrl+"/tutorial?"+e.join("&")}})},{"../models/tutorial":7}],4:[function(e,t,o){(function(t){var o="undefined"!=typeof window?window.jQuery:"undefined"!=typeof t?t.jQuery:null,i=e("./views/post"),n=e("./views/posts"),r=e("./views/tutorials"),a=e("./views/tutorial"),l=e("./views/chapters"),s=e("./views/chapter"),d=(e("./collections/chapters"),Backbone.Router.extend({routes:{"blog(/)":"archivePosts","blog/:slug(/)":"singlePost","tutorial(/)":"archiveTutorials","tutorial/:slug(/)":"singleTutorial","chapter(/)":"archiveChapters","chapter/:slug(/)":"singleChapter","profile(/)":"profile"},archivePosts:function(){this.view=new n({el:o(".dracobit-section")}),this.view.render()},singlePost:function(){this.view=new i({el:o(".dracobit-section")}),this.view.render()},archiveTutorials:function(){this.view=new r({el:o(".dracobit-section")}),this.view.render()},singleTutorial:function(){this.view=new a({el:o(".dracobit-section")}),this.view.render()},archiveChapters:function(){this.view=new l({el:o(".dracobit-section")}),this.view.render()},singleChapter:function(){this.view=new s({el:o(".dracobit-section")}),this.view.render()},profile:function(){this.view=new l({el:o(".dracobit-section")}),this.view.collection.id=o("input[name=current-user-id]").val(),this.view.render()}}));window.router=new d,Backbone.history.start({pushState:!0}),o(function(){if(o("ul.nav li").click(function(){o(this).hasClass("active")||(o("ul.nav li").removeClass("active"),o(this).addClass("active"))}),o(".upload-section-container").length){var e=new Dropzone("#dracobit_dropzone_1",{url:Dracobit.options.apiUrl+"/media",maxFilesize:500,previewsContainer:"#dracobit_dropzone_preview_1",thumbnailWidth:400,thumbnailHeight:400,autoProcessQueue:!1,uploadMultiple:!1,clickable:["#dracobit_dropzone_1","#dracobit_dropzone_1 i","#dracobit_dropzone_1 p","#dracobit_dropzone_1_contents"],init:function(){this.on("addedfile",function(e){o("#dracobit_dropzone_1").hide(),o(".dracobit_dropzone_preview[data-id=1]").show(),o("#remove-buttons").show()}),this.on("removedfile",function(e){o("#remove-buttons").hide(),o(".dracobit_dropzone_preview[data-id=1]").hide(),o("#dracobit_dropzone_1").hasClass("drag-hover")&&(o("i[data-id=1]").css("display","block"),o("p[data-id=1]").text("Add a Primary Photo"),o("#dracobit_dropzone_1").removeClass("drag-hover")),t.files.length?o("#dracobit_dropzone_preview[data-id=1]").show():o("#dracobit_dropzone_1").show()}),this.on("dragover",function(e){"none"===o("#dracobit_dropzone_preview_1").css("display")&&(o("i[data-id=1]").css("display","none"),o("p[data-id=1]").text("Move Photo Here"),o("#dracobit_dropzone_1").addClass("drag-hover"))}),this.on("dragleave",function(e){"none"===o("#dracobit_dropzone_preview_1").css("display")&&(o("i[data-id=1]").css("display","block"),o("p[data-id=1]").text("Add a Primary Photo"),o("#dracobit_dropzone_1").removeClass("drag-hover"))})}}),t=new Dropzone("#dracobit_dropzone_preview_1",{url:Dracobit.options.apiUrl+"/media",maxFilesize:500,previewsContainer:"#dracobit_dropzone_preview_1",thumbnailWidth:400,thumbnailHeight:400,autoProcessQueue:!1,uploadMultiple:!1,clickable:!1,init:function(){this.on("addedfile",function(e){o("#dracobit_dropzone_1").hide(),o(".dracobit_dropzone_preview[data-id=1]").show(),o("#remove-buttons").show()}),this.on("removedfile",function(e){o("#remove-buttons").hide(),o(".dracobit_dropzone_preview[data-id=1]").hide(),o("#dracobit_dropzone_1").hasClass("drag-hover")&&(o("i[data-id=1]").css("display","block"),o("p[data-id=1]").text("Add a Primary Photo"),o("#dracobit_dropzone_1").removeClass("drag-hover")),o("#dracobit_dropzone_1").show()}),this.on("drop",function(i){"edit"==o("#dracobit_dropzone_preview_1").data("type")?o("#dracobit_dropzone_preview_1 .dz-preview").remove():(e.files.length&&e.removeAllFiles(),t.files.length&&t.removeAllFiles())})}});o(".upload-submit").click(function(){if(chapter_title=o(".upload-chapter-title").val(),chapter_content=o(".upload-chapter-content").val(),chapter_tagline=o(".upload-chapter-tagline").val(),chapter_version=o(".upload-chapter-version").val(),chapter_title){content={title:chapter_title,content_raw:chapter_content,tagline:chapter_tagline,version:chapter_version},console.log(content);var i=new FormData,n="";e.files.length?(i.append("file",e.files[0]),n=e.files[0].name):t.files.length&&(i.append("file",t.files[0]),n=t.files[0].name),""!==n?o.ajax({url:Dracobit.options.apiUrl+"/media",type:"post",data:i,headers:{"Content-Disposition":"attachment; filename="+n,"X-WP-Nonce":Dracobit.options.nonce},cache:!1,contentType:!1,async:!1,processData:!1}).then(function(e){content.image=e.ID,console.log(content),o.ajax({type:"post",url:Dracobit.options.apiUrl+"/chapter",headers:{"X-WP-Nonce":Dracobit.options.nonce},data:content}).then(function(e){console.log(e)})}):(o(".upload-message").html("There was a problem with the submission. Please enter a title."),o(".upload-message-container").show())}else o(".upload-message").html("There was a problem with the submission. Please enter a title."),o(".upload-message-container").show()})}o("#remove-buttons").on("click",".dracobit_dropzone_delete",function(){$data=o(this).data("type"),"edit"==$data?(o("#dracobit_dropzone_preview_1 .dz-preview").remove(),o("#edit-image").attr("src",""),o("#dracobit_dropzone_preview_1").hide(),o("#dracobit_dropzone_1").show()):(e.files.length?$dropzone=e:t?$dropzone=t:alert("there is no image to delete"),$dropzone.removeAllFiles())})})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collections/chapters":1,"./views/chapter":8,"./views/chapters":9,"./views/post":10,"./views/posts":11,"./views/tutorial":12,"./views/tutorials":13}],5:[function(e,t,o){t.exports=Backbone.Model.extend({defaults:{ID:0,title:"",thumbnail:"",tagline:"",version:""},url:function(){return Dracobit.options.apiUrl+"/chapter/"+this.get("ID")}})},{}],6:[function(e,t,o){t.exports=Backbone.Model.extend({defaults:{ID:0,title:"",thumbnail:""},url:function(){return Dracobit.options.apiUrl+"/posts/"+this.get("ID")}})},{}],7:[function(e,t,o){t.exports=Backbone.Model.extend({defaults:{ID:0,title:"",thumbnail:"",tagline:"",version:""},url:function(){return Dracobit.options.apiUrl+"/tutorial/"+this.get("ID")}})},{}],8:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../models/chapter");t.exports=Backbone.View.extend({events:{},initialize:function(){this.model=new n({ID:Dracobit.currentPost}),this.template=_.template(i("script.chapter").html())},render:function(){var e=this;this.model.fetch().done(function(){var t=e.template({chapter:e.model.toJSON()});e.$el.html(t)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/chapter":5}],9:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../collections/chapters");t.exports=Backbone.View.extend({initialize:function(){this.collection=new n,this.template=_.template(i("script.chapters").html())},render:function(){var e=this;this.collection.fetch().done(function(t,o,i){var n=e.template({chapters:e.collection.toJSON()});e.$el.html(n)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collections/chapters":1}],10:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../models/post");t.exports=Backbone.View.extend({initialize:function(){this.model=new n({ID:Dracobit.currentPost}),this.template=_.template(i("script.post").html())},render:function(){var e=this;this.model.fetch().done(function(){var t=e.template({post:e.model.toJSON()});e.$el.html(t)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/post":6}],11:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../collections/posts");t.exports=Backbone.View.extend({initialize:function(){this.collection=new n,this.template=_.template(i("script.posts").html())},render:function(){var e=this;this.collection.fetch().done(function(t,o,i){var n=e.template({posts:e.collection.toJSON()});e.$el.html(n)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collections/posts":2}],12:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../models/tutorial"),r=e("../models/chapter");t.exports=Backbone.View.extend({events:{"click a":"getChapter"},initialize:function(){this.model=new n({ID:Dracobit.currentPost}),this.template=_.template(i("script.tutorial").html())},render:function(){var e=this;this.model.fetch().done(function(){var t=e.template({tutorial:e.model.toJSON()});e.$el.html(t)})},getChapter:function(e){var t=this;chapter=new r({ID:e.currentTarget.dataset.chapterId}),chapter.fetch().done(function(e){t.$el=i(".dracobit-section-chapter"),t.$el.html(e.content)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/chapter":5,"../models/tutorial":7}],13:[function(e,t,o){(function(o){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof o?o.jQuery:null,n=e("../collections/tutorials");t.exports=Backbone.View.extend({initialize:function(){this.collection=new n,this.template=_.template(i("script.tutorials").html())},render:function(){var e=this;this.collection.fetch().done(function(t,o,i){var n=e.template({tutorials:e.collection.toJSON()});e.$el.html(n)})}})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collections/tutorials":3}]},{},[4]);